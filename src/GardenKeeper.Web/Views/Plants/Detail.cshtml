@model GardenKeeper.Application.ViewModels.PlantDetailViewModel
@{
    ViewData["Title"] = Model.Plant.CommonName;
    var p = Model.Plant;
}

<nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a asp-controller="Plants" asp-action="Index">Plants</a></li>
        <li class="breadcrumb-item active">@p.CommonName</li>
    </ol>
</nav>

<div class="row">
    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h2 class="mb-0">@p.CommonName</h2>
                <em>@p.ScientificName</em>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-sm-6">
                        <dt>Plant Type</dt>
                        <dd><span class="badge bg-success">@p.PlantType</span></dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Hardiness Zones</dt>
                        <dd>@p.HardinessZones</dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Days to Maturity</dt>
                        <dd>@(p.DaysToMaturity > 300 ? "Perennial" : p.DaysToMaturity + " days")</dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Spacing</dt>
                        <dd>@p.SpacingInches inches (@(Math.Round(p.SpacingInches / 12.0, 1)) ft)</dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Sun Requirement</dt>
                        <dd>@p.SunRequirement</dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Water Requirement</dt>
                        <dd>@p.WaterRequirement</dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Typical Start Method</dt>
                        <dd>@p.TypicalStartMethod</dd>
                    </div>
                    <div class="col-sm-6">
                        <dt>Data Source</dt>
                        <dd><small class="text-muted">@p.DataSource</small></dd>
                    </div>
                </div>

                @if (!string.IsNullOrEmpty(p.Notes))
                {
                    <hr />
                    <dt>Notes</dt>
                    <dd>@p.Notes</dd>
                }
            </div>
        </div>

        <!-- Crop Rotation -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Crop Rotation Notes</h5>
            </div>
            <div class="card-body">
                <p class="mb-0">@(string.IsNullOrEmpty(p.CropRotationNotes) ? "No rotation notes available." : p.CropRotationNotes)</p>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <!-- Companion Plants -->
        <div class="card mb-4">
            <div class="card-header bg-success-subtle">
                <h5 class="mb-0">Companion Plants</h5>
            </div>
            <div class="card-body">
                @if (string.IsNullOrEmpty(p.CompanionPlants))
                {
                    <p class="text-muted">No companion plant data.</p>
                }
                else
                {
                    <p class="text-muted small mb-2">@p.CompanionPlants</p>
                    @if (Model.CompanionPlantObjects.Any())
                    {
                        <hr class="my-2" />
                        <ul class="list-group list-group-flush">
                            @foreach (var companion in Model.CompanionPlantObjects)
                            {
                                <li class="list-group-item px-0">
                                    <a asp-action="Detail" asp-route-id="@companion.Id">@companion.CommonName</a>
                                    <small class="text-muted d-block">@companion.PlantType</small>
                                </li>
                            }
                        </ul>
                    }
                }
            </div>
        </div>

        <a asp-controller="Plants" asp-action="Index" class="btn btn-outline-secondary w-100">
            &larr; Back to Plant Database
        </a>
    </div>
</div>
